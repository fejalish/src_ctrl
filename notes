

objective
	deliver an image at (almost) exact size to fit containing element
	


front end
	fluid images set up
		width: 100%;
		height: auto;
	container set to % of 100% screen width

	store screen width in cookie
		save in server session
		update whenever screen size changes

can't dynamically get image size really
	or rather don't want to - too intensive
	but can put image proportions in the src manually
		but that only works if image dimensions not set in CSS...

server resizing:
	give it width
		and height (optional)
	either in percent or pixels (if want exact)
	restrain proportion when adjust size if only one dimension
	never make bigger
	

server should have screen width after first visit
	or perhaps if no sessions
		can do server redirect through empty page that just sets cookie if JS exists and is not set already?
			can only do this if client uses script

pixels
	need to set different way to do exact resize
	need totally different url structure really

sample url:

http://src.fejalish.com/{min:320,max:479,per:0.3,quality:60|min:480,max:767,per:0.33333,quality:60|min:768,max:*,per:0.75,quality:60}/http://src.fejalish.com/demo/images/P1090222.JPG

so server checks cookied screen width, then calculates image width based on src value (either % or px)

if have min/max for specific range, but screen width is outside it, imply 100%?

have one master default for server quality and user can input specific quality on per image basis (also per call?)

next:
	
	provide first load script that will load page with only set cookie width and then redirect back to called page
		not best way perhaps but an option?
	use wurfl for first load perhaps
		at least give people a choice
			either heavy load or light

	CDN caching or entire code base?
		prolly not reasonable

	clear cache mechanism
		also default time based cache flush
	turn off browser cache?
		cause single URL can return multiple images
		maybe too bandwidth intense?
		
		http://www.jonasjohn.de/snippets/php/caching.htm
		http://dtbaker.com.au/random-bits/how-to-cache-images-generated-by-php.html
		
		maybe this whole idea is effed cause cannot local cache or CDN the URL itself
			the images are cached on the server obviously
			but cannot be on the client side
				so sending full images each time a page is loaded
			of course can cache standard images that aren't dynamically resized...
				but does that help really?
		

whitelist/blacklist mechanism
	so can enable or disable referer domains
	auto check bandwidth on all images per domain?




htaccess
	mod caching - see html5 boilerplate

https://github.com/fejalish/src_ctrl


http://src.fejalish.com/%7Bmin:320,max:479,per:1.0,quality:75|min:480,max:767,per:0.4512,quality:75|min:768,max:*,per:0.2208,quality:75%7D/http://src.fejalish.com/demo/images/P1090223.JPG

http://src.fejalish.com/%7Bmin:320,max:479,per:1.0,quality:75|min:480,max:767,per:0.4512,quality:75|min:768,max:*,per:0.2208,quality:75%7D/http://sparrowheart.ca/images/sparrowlogo.gif

http://src.fejalish.com/%7Bmin:320,max:479,per:1.0,quality:75|min:480,max:767,per:0.4512,quality:75|min:768,max:*,per:0.2208,quality:75%7D/http://headpoo.com/ideas/headpoo_scan1.png

http://src.fejalish.com/%7Bmin:320,max:479,per:1.0,quality:75|min:480,max:767,per:0.4512,quality:75|min:768,max:*,per:0.2208,quality:75%7D/https://encrypted.google.com/images/srpr/logo3w.png

http://src.fejalish.com/%7Bmin:320,max:479,per:1.0,quality:75|min:480,max:767,per:0.4512,quality:75|min:768,max:*,per:0.2208,quality:75%7D/http://sparrowheart.ca/robots.txt


flush image
	put flush flag in ranges?
	need to be able to remove all images
		input
		output
			and all output sizes...
			simple regex?
	need time based thing too so server will check every so often?
		and if cannot check if new or not just auto flush
	put flag in range for cache length even?


http://headpoo.com/src_ctrl/demo/

perhaps just?
	http://src.fejalish.com/{f}/http://src.fejalish.com/demo/images/P1090222.JPG






